<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">

    <script src="../bower_components/d3/d3.js"></script>
    <script src="../bower_components/jquery/dist/jquery.min.js"></script>
    <script src="../dist/asgard.js"></script>
    <link rel="stylesheet" href="../dist/css/theme/default.css"/>
</head>
<body>

<button>点击</button>

<div id="svg">

</div>


<script>

    var stock;

    function getApi(symbol) {
        var interval = '1', rows = 3000;
        return 'http://api.markets.wallstreetcn.com:80/v1/chart.json?symbol=' + symbol + '&interval=' + interval + '&rows=' + rows;
    }


    $.get(getApi('XAUUSD'), function (data) {
        stock = new Asgard.Stock('#svg', {
            width: 700,
            height: 400,
            isZoom: true,
            interval: '1',
            data: [
                {
                    name: 'sh000001',
                    data: data.results
                }
            ],
            components: [
                {
                    name: 'axis-bottom',
                    type: 'axis',
                    orient: 'bottom'
                },
                {
                    name: 'axis-right',
                    type: 'axis',
                    orient: 'right'
                },
                {
                    name: 'grid-x',
                    type: 'grid',
                    orient: 'x'
                },
                {
                    name: 'grid-y',
                    type: 'grid',
                    orient: 'y'
                },
                {
                    name: 'tips',
                    type: 'tips'
                },
                {
                    name: 'current-price-line',
                    type: 'currentPriceLine',
                }
            ],
            charts: [

                {
                    name: 'sh00001-Candle',
                    type: 'hollowCandle',
                    dataName: 'sh000001'
                }
            ]

        });

        stock.draw();

    }, 'jsonp');


</script>

<script>

    $('button').on('click', function () {


        $.get(getApi('XAUUSD'), function (data) {


            stock.addData({
                name:'sh000001',
                data:data.results
            });

            stock.draw();

        }, 'jsonp');


    });


</script>


</body>
</html>